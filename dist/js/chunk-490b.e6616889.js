(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-490b"],{"0ca3":function(t,e,n){"use strict";var i=n("9afa"),r=n.n(i);r.a},"36ab":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"form"},[n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("客户名称：")]),n("wx-input",{ref:"name",attrs:{emptyTip:"请输入客户名称",width:"77%",isRequest:!0,onblur:t.blur,rule:["blur"],ruleFn:t.name_rule},model:{value:t.client_name,callback:function(e){t.client_name=e},expression:"client_name "}})],1),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("联系人：")]),n("wx-input",{ref:"linkman",attrs:{emptyTip:"请输入联系人",width:"77%",isRequest:!0,onblur:t.blur,rule:["blur"],ruleFn:t.contact_rule},model:{value:t.contact_name,callback:function(e){t.contact_name=e},expression:"contact_name"}})],1),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("手机号：")]),n("wx-input",{ref:"tel",attrs:{emptyTip:"请输入手机号",width:"77%",isRequest:!0,onblur:t.blur,rule:["blur"],ruleFn:t.mobile_rule},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("验证码：")]),n("wx-input",{ref:"yzm",attrs:{emptyTip:"请输入验证码",width:"50%",isRequest:!0,onblur:t.blur,rule:["blur"]},model:{value:t.verify_code,callback:function(e){t.verify_code=e},expression:"verify_code"}}),t.count?t._e():n("span",{staticClass:"yzm",on:{click:t.sendYzm}},[t._v("获取验证码")]),t.count?n("span",{staticClass:"yzm date"},[t._v("剩余 "+t._s(t.num)+" 秒")]):t._e()],1)]),n("div",{staticClass:"btn-box"},[n("mt-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.errorShow,expression:"errorShow"}],staticClass:"error"},[t._v("提示："+t._s(t.errorTip))])],1)])},r=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"checkbox"===t.type?n("input",{directives:[{name:"model",rawName:"v-model",value:t.v,expression:"v"}],ref:"wx-input",staticClass:"wx-input",class:{faild:"faild"===t.valid},style:{width:t.width},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.v)?t._i(t.v,null)>-1:t.v},on:{change:function(e){var n=t.v,i=e.target,r=!!i.checked;if(Array.isArray(n)){var a=null,s=t._i(n,a);i.checked?s<0&&(t.v=n.concat([a])):s>-1&&(t.v=n.slice(0,s).concat(n.slice(s+1)))}else t.v=r}}}):"radio"===t.type?n("input",{directives:[{name:"model",rawName:"v-model",value:t.v,expression:"v"}],ref:"wx-input",staticClass:"wx-input",class:{faild:"faild"===t.valid},style:{width:t.width},attrs:{type:"radio"},domProps:{checked:t._q(t.v,null)},on:{change:function(e){t.v=null}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:t.v,expression:"v"}],ref:"wx-input",staticClass:"wx-input",class:{faild:"faild"===t.valid},style:{width:t.width},attrs:{type:t.type},domProps:{value:t.v},on:{input:function(e){e.target.composing||(t.v=e.target.value)}}})},s=[],o=(n("6762"),n("2fdb"),n("f559"),n("456d"),n("ac6a"),{props:{value:{},width:{type:String,default:"100%"},isRequest:{type:Boolean,default:function(){return!1}},type:{type:String,default:"text"},rule:{type:Array,default:function(){return[]}},ruleFn:{type:Function,default:function(){return!0}},onblur:{type:Function,default:function(){}},onchange:{type:Function,default:function(){}},onkeyup:{type:Function,default:function(){}},emptyTip:{type:String,default:function(){return"不能为空"}}},data:function(){return{v:this.value,valid:"success",errorTip:""}},mounted:function(){var t=this,e=this.$refs["wx-input"];Object.keys(this._props).filter(function(t){return t.startsWith("on")}).forEach(function(n){return e.addEventListener(n.slice(2),function(){t.rule.includes(n.slice(2))&&t.validate();var e="faild"===t.valid?t.errorTip:"";!t.v&&t.isRequest&&(e=t.emptyTip),t[n].call(t,e)},!1)})},methods:{validate:function(){var t=this.ruleFn.call(this,this.v),e=t.result,n=t.tip,i=void 0===n?"错误":n,r="faild"===e?i:"";return!this.v&&this.isRequest&&(r=this.emptyTip,e="faild"),this.errorTip=r,this.valid=e,r}},watch:{v:function(t){this.$emit("input",t)}},beforeDestroy:function(){this.$refs["wx-input"]=null}}),c=o,u=(n("ce3e"),n("2877")),l=Object(u["a"])(c,a,s,!1,null,"0eedb556",null);l.options.__file="WxInput.vue";var f=l.exports,d=n("76a0"),p=n("b05c"),m={components:{WxInput:f,"mt-button":d["Button"]},mounted:function(){this.staff_id=this.$route.query.staff_id},data:function(){return{client_name:"",contact_name:"",mobile:"",verify_code:"",staff_id:"",errorShow:!1,errorTip:"",timeID:null,num:60,countTime:null,count:!1}},methods:{blur:function(t){t?(this.errorShow=!0,this.errorTip=t):(this.errorShow=!1,this.errorTip="")},sendYzm:function(){var t=this;if(0!==this.mobile.length){if(11===this.mobile.length){var e=this;Object(p["b"])(this.mobile,this.staff_id,0).then(function(n){clearInterval(t.countTime),"T"===n.status?(Object(d["Toast"])("验证码已发送"),e.countTime=setInterval(function(){if(e.num<=0)return clearInterval(e.countTime),e.countTime=null,e.num=60,void(e.count=!1);e.count=!0,e.num--},1e3)):Object(d["Toast"])({message:n.error[0],duration:2e3})})}}else Object(d["Toast"])("请输入手机号")},name_rule:function(t){return t.length>30?{result:"faild",tip:"客户名称最多填写30个字哦"}:{result:"success"}},contact_rule:function(t){return t.length>30?{result:"faild",tip:"联系人最多填写30个字哦"}:{result:"success"}},mobile_rule:function(t){return 11!==t.length?{result:"faild",tip:"请输入正确的手机号码"}:{result:"success"}},submit:function(){var t=this;this.validate().then(function(e){e&&Object(p["c"])({commonStaffId:t.staff_id,client_name:t.client_name,contact_name:t.contact_name,mobile:t.mobile,verify_code:t.verify_code}).then(function(e){if("T"===e.status)t.$router.push("/inviteok?client_name=".concat(t.client_name,"&contact_name=").concat(t.contact_name,"&mobile=").concat(t.mobile));else if(e.error){var n=e.error[0]||e.error.code||e.error.mobile[0]||"提交错误";Object(d["Toast"])({message:n,duration:2e3})}})})},validate:function(){var t=this,e=["name","linkman","tel","yzm"],n=!0;return new Promise(function(i,r){for(var a="",s=0;s<e.length;s++){var o=e[s],c=t.$refs[o].validate();c&&(n=!1,a||(a=c))}t.errorShow=!n,t.errorTip=a,i(n)})}}},v=m,h=(n("0ca3"),Object(u["a"])(v,i,r,!1,null,"263b4bd6",null));h.options.__file="form.vue";e["default"]=h.exports},"456d":function(t,e,n){var i=n("4bf8"),r=n("0d58");n("5eda")("keys",function(){return function(t){return r(i(t))}})},"5eda":function(t,e,n){var i=n("5ca1"),r=n("8378"),a=n("79e5");t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),i(i.S+i.F*a(function(){n(1)}),"Object",s)}},"751a":function(t,e,n){"use strict";n("96cf");var i=n("3040"),r=(n("cadf"),n("551c"),n("097d"),n("bc3a")),a=n.n(r),s=n("a18c"),o=n("76a0"),c=(n("56d7"),n("7155")),u=a.a.create({baseURL:"".concat(window.g.host),timeout:6e4});u.interceptors.request.use(function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(sessionStorage.getItem("expires")&&sessionStorage.getItem("expires")-(new Date).getTime()/1e3<300)){t.next=8;break}return t.next=3,Object(c["b"])(e);case 3:return e=t.sent,o["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),t.abrupt("return",e);case 8:return sessionStorage.getItem("access_token")&&(e.headers["Authorization"]="Bearer "+sessionStorage.getItem("access_token")),o["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),t.abrupt("return",e);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),function(t){o["Indicator"].close(),Promise.reject(t)}),u.interceptors.response.use(function(t){var e=t.data;return o["Indicator"].close(),e},function(t){if(t.response){if(401==t.response.status){o["Indicator"].close();var e=t.response.data.error.message;if(e.startWith("qywx_application_expried"))return void s["a"].push("/expire");if(e.startWith("qywx_application_not_enable"))return void s["a"].push("/expire");if(e.startWith("invalid_credentials"))return sessionStorage.clear(),void s["a"].push("/login");if(e.startWith("access_denied"))return void Object(c["b"])();s["a"].push("/noauth")}o["Indicator"].close()}else o["Indicator"].close();return Promise.resolve(t.response.data)}),e["a"]=u},"9afa":function(t,e,n){},ac6a:function(t,e,n){for(var i=n("cadf"),r=n("0d58"),a=n("2aba"),s=n("7726"),o=n("32e9"),c=n("84f2"),u=n("2b4c"),l=u("iterator"),f=u("toStringTag"),d=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=r(p),v=0;v<m.length;v++){var h,b=m[v],_=p[b],y=s[b],g=y&&y.prototype;if(g&&(g[l]||o(g,l,d),g[f]||o(g,f,b),c[b]=d,_))for(h in i)g[h]||a(g,h,i[h],!0)}},b05c:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return s});var i=n("751a");function r(t){return Object(i["a"])({url:"/api/zntk/v1/staff/qrcode",params:{size:"150",url:t},method:"get"})}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(i["a"])({url:"/api/zntk/v1/clients/verify-code",params:{mobile:t,staff_id:e,check:n},method:"get"})}function s(t){return Object(i["a"])({url:"/api/zntk/v1/clients/".concat(t.commonStaffId),data:t,method:"post"})}},ce3e:function(t,e,n){"use strict";var i=n("eebe"),r=n.n(i);r.a},eebe:function(t,e,n){},f559:function(t,e,n){"use strict";var i=n("5ca1"),r=n("9def"),a=n("d2c8"),s="startsWith",o=""[s];i(i.P+i.F*n("5147")(s),"String",{startsWith:function(t){var e=a(this,t,s),n=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return o?o.call(e,i,n):e.slice(n,n+i.length)===i}})}}]);
//# sourceMappingURL=chunk-490b.e6616889.js.map