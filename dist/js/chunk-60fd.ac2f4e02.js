(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60fd"],{2741:function(t,e,r){},"36ab":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"form"},[r("div",{staticClass:"item"},[r("span",{staticClass:"title"},[t._v("客户名称：")]),r("wx-input",{ref:"name",attrs:{emptyTip:"请输入客户名称",width:"77%",isRequest:!0,onblur:t.blur,rule:["blur"],ruleFn:t.name_rule},model:{value:t.client_name,callback:function(e){t.client_name=e},expression:"client_name "}})],1),r("div",{staticClass:"item"},[r("span",{staticClass:"title"},[t._v("联系人：")]),r("wx-input",{ref:"linkman",attrs:{emptyTip:"请输入联系人",width:"77%",isRequest:!0,onblur:t.blur,rule:["blur"],ruleFn:t.contact_rule},model:{value:t.contact_name,callback:function(e){t.contact_name=e},expression:"contact_name"}})],1),r("div",{staticClass:"item"},[r("span",{staticClass:"title"},[t._v("手机号：")]),r("wx-input",{ref:"tel",attrs:{emptyTip:"请输入手机号",width:"77%",isRequest:!0,onblur:t.blur,rule:["blur"],ruleFn:t.mobile_rule},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1),r("div",{staticClass:"item"},[r("span",{staticClass:"title"},[t._v("验证码：")]),r("wx-input",{ref:"yzm",attrs:{emptyTip:"请输入验证码",width:"50%",isRequest:!0,onblur:t.blur,rule:["blur"]},model:{value:t.verify_code,callback:function(e){t.verify_code=e},expression:"verify_code"}}),t.count?t._e():r("span",{staticClass:"yzm",on:{click:t.sendYzm}},[t._v("获取验证码")]),t.count?r("span",{staticClass:"yzm date"},[t._v("剩余 "+t._s(t.num)+" 秒")]):t._e()],1)]),r("div",{staticClass:"btn-box"},[r("mt-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")]),r("p",{directives:[{name:"show",rawName:"v-show",value:t.errorShow,expression:"errorShow"}],staticClass:"error"},[t._v("提示："+t._s(t.errorTip))])],1)])},i=[],o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return"checkbox"===t.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t.v,expression:"v"}],ref:"wx-input",staticClass:"wx-input",class:{faild:"faild"===t.valid},style:{width:t.width},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.v)?t._i(t.v,null)>-1:t.v},on:{change:function(e){var r=t.v,n=e.target,i=!!n.checked;if(Array.isArray(r)){var o=null,a=t._i(r,o);n.checked?a<0&&(t.v=r.concat([o])):a>-1&&(t.v=r.slice(0,a).concat(r.slice(a+1)))}else t.v=i}}}):"radio"===t.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t.v,expression:"v"}],ref:"wx-input",staticClass:"wx-input",class:{faild:"faild"===t.valid},style:{width:t.width},attrs:{type:"radio"},domProps:{checked:t._q(t.v,null)},on:{change:function(e){t.v=null}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:t.v,expression:"v"}],ref:"wx-input",staticClass:"wx-input",class:{faild:"faild"===t.valid},style:{width:t.width},attrs:{type:t.type},domProps:{value:t.v},on:{input:function(e){e.target.composing||(t.v=e.target.value)}}})},a=[],c=(r("6762"),r("2fdb"),r("f559"),r("456d"),r("ac6a"),r("cadf"),r("551c"),r("097d"),{props:{value:{},width:{type:String,default:"100%"},isRequest:{type:Boolean,default:function(){return!1}},type:{type:String,default:"text"},rule:{type:Array,default:function(){return[]}},ruleFn:{type:Function,default:function(){return!0}},onblur:{type:Function,default:function(){}},onchange:{type:Function,default:function(){}},onkeyup:{type:Function,default:function(){}},emptyTip:{type:String,default:function(){return"不能为空"}}},data:function(){return{v:this.value,valid:"success",errorTip:""}},mounted:function(){var t=this,e=this.$refs["wx-input"];Object.keys(this._props).filter(function(t){return t.startsWith("on")}).forEach(function(r){return e.addEventListener(r.slice(2),function(){t.rule.includes(r.slice(2))&&t.validate();var e="faild"===t.valid?t.errorTip:"";!t.v&&t.isRequest&&(e=t.emptyTip),t[r].call(t,e)},!1)})},methods:{validate:function(){var t=this.ruleFn.call(this,this.v),e=t.result,r=t.tip,n=void 0===r?"错误":r,i="faild"===e?n:"";return!this.v&&this.isRequest&&(i=this.emptyTip,e="faild"),this.errorTip=i,this.valid=e,i}},watch:{v:function(t){this.$emit("input",t)}},beforeDestroy:function(){this.$refs["wx-input"]=null}}),s=c,u=(r("ce3e"),r("2877")),l=Object(u["a"])(s,o,a,!1,null,"0eedb556",null);l.options.__file="WxInput.vue";var f=l.exports,h=r("76a0"),p=r("b05c"),d={components:{WxInput:f,"mt-button":h["Button"]},mounted:function(){this.staff_id=this.$route.query.staff_id},data:function(){return{client_name:"",contact_name:"",mobile:"",verify_code:"",staff_id:"",errorShow:!1,errorTip:"",timeID:null,num:60,countTime:null,count:!1}},methods:{blur:function(t){t?(this.errorShow=!0,this.errorTip=t):(this.errorShow=!1,this.errorTip="")},sendYzm:function(){var t=this;0!==this.mobile.length?11===this.mobile.length&&Object(p["b"])(this.mobile,this.staff_id,0).then(function(e){clearInterval(t.countTime),"T"===e.status&&t.checkYzmStatus()}):Object(h["Toast"])("请输入手机号")},checkYzmStatus:function(){var t=this;Object(p["b"])(this.mobile,this.staff_id,1).then(function(e){"T"===e.status?(Object(h["Toast"])("验证码发送成功"),clearInterval(t.timeID),t.timeID=null,t.count=!0,t.countTime=setInterval(function(){if(0===t.num)return clearInterval(t.countTime),t.countTime=null,t.num=60,void(t.count=!1);t.num--},1e3)):t.checkYzmStatus()})},name_rule:function(t){return t.length>50?{result:"faild",tip:"客户名称超限：客户名称最多填写50个字哦"}:{result:"success"}},contact_rule:function(t){return t.length>50?{result:"faild",tip:"联系人超限：联系人最多填写50个字哦"}:{result:"success"}},mobile_rule:function(t){return 11!==t.length?{result:"faild",tip:"手机号码没有通过验证：请输入正确的手机号码"}:{result:"success"}},submit:function(){var t=this;this.validate().then(function(e){e&&Object(p["c"])({commonStaffId:t.staff_id,client_name:t.client_name,contact_name:t.contact_name,mobile:t.mobile,verify_code:t.verify_code}).then(function(e){if("T"===e.status)t.$router.push("/inviteok?client_name=".concat(t.client_name,"&contact_name=").concat(t.contact_name,"&mobile=").concat(t.mobile));else if(e.error){var r=e.error[0]||e.error.code||e.error.mobile[0]||"提交错误";Object(h["Toast"])({message:r,duration:2e3})}})})},validate:function(){var t=this,e=["name","linkman","tel","yzm"],r=!0;return new Promise(function(n,i){for(var o="",a=0;a<e.length;a++){var c=e[a],s=t.$refs[c].validate();s&&(r=!1,o||(o=s))}t.errorShow=!r,t.errorTip=o,n(r)})}}},v=d,m=(r("b7c0"),Object(u["a"])(v,n,i,!1,null,"b2eeae16",null));m.options.__file="form.vue";e["default"]=m.exports},"456d":function(t,e,r){var n=r("4bf8"),i=r("0d58");r("5eda")("keys",function(){return function(t){return i(n(t))}})},"5eda":function(t,e,r){var n=r("5ca1"),i=r("8378"),o=r("79e5");t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],a={};a[t]=e(r),n(n.S+n.F*o(function(){r(1)}),"Object",a)}},"751a":function(t,e,r){"use strict";r("96cf");function n(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(t,e){try{var r=o[t](e),a=r.value}catch(t){return void i(t)}r.done?n(a):Promise.resolve(a).then(c,s)}function c(t){a("next",t)}function s(t){a("throw",t)}c()})}}r("cadf"),r("551c"),r("097d");var i=r("db49"),o=r("bc3a"),a=r.n(o),c=r("a18c"),s=r("76a0"),u=(r("56d7"),r("7155")),l=a.a.create({baseURL:"".concat(i["a"]),timeout:6e4});l.interceptors.request.use(function(){var t=n(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(sessionStorage.getItem("expires")&&sessionStorage.getItem("expires")-(new Date).getTime()/1e3<300)){t.next=9;break}return t.next=3,Object(u["b"])(e);case 3:return e=t.sent,console.log(e),s["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),t.abrupt("return",e);case 9:return sessionStorage.getItem("access_token")&&(e.headers["Authorization"]="Bearer "+sessionStorage.getItem("access_token")),s["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),t.abrupt("return",e);case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),function(t){s["Indicator"].close(),Promise.reject(t)}),l.interceptors.response.use(function(t){var e=t.data;return s["Indicator"].close(),e},function(t){if(t.response){if(401==t.response.status){s["Indicator"].close();var e=t.response.data.error.message;if(e.startWith("qywx_application_expried"))return void c["a"].push("/noauth");if(e.startWith("invalid_credentials"))return sessionStorage.clear(),void c["a"].push("/login");if(e.startWith("access_denied"))return void Object(u["b"])();c["a"].push("/noauth")}s["Indicator"].close()}else s["Indicator"].close();return Promise.resolve(t.response.data)});e["a"]=l},"96cf":function(t,e){!function(e){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag",u="object"===typeof t,l=e.regeneratorRuntime;if(l)u&&(t.exports=l);else{l=e.regeneratorRuntime=u?t.exports:{},l.wrap=w;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",v={},m={};m[a]=function(){return this};var y=Object.getPrototypeOf,g=y&&y(y(P([])));g&&g!==n&&i.call(g,a)&&(m=g);var b=S.prototype=x.prototype=Object.create(m);L.prototype=b.constructor=S,S.constructor=L,S[s]=L.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===L||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(b),t},l.awrap=function(t){return{__await:t}},T(k.prototype),k.prototype[c]=function(){return this},l.AsyncIterator=k,l.async=function(t,e,r,n){var i=new k(w(t,e,r,n));return l.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},T(b),b[s]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},l.values=P,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return c.type="throw",c.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;I(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}}}function w(t,e,r,n){var i=e&&e.prototype instanceof x?e:x,o=Object.create(i.prototype),a=new C(n||[]);return o._invoke=O(t,r,a),o}function _(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function x(){}function L(){}function S(){}function T(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function k(t){function e(r,n,o,a){var c=_(t[r],t,n);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"===typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(u).then(function(t){s.value=t,o(s)},a)}a(c.arg)}var r;function n(t,n){function i(){return new Promise(function(r,i){e(t,n,r,i)})}return r=r?r.then(i,i):i()}this._invoke=n}function O(t,e,r){var n=f;return function(i,o){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw o;return F()}r.method=i,r.arg=o;while(1){var a=r.delegate;if(a){var c=j(a,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var s=_(t,e,r);if("normal"===s.type){if(n=r.done?d:h,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=d,r.method="throw",r.arg=s.arg)}}}function j(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,j(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=_(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function P(t){if(t){var e=t[a];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){while(++n<t.length)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return o.next=o}}return{next:F}}function F(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},ac6a:function(t,e,r){for(var n=r("cadf"),i=r("0d58"),o=r("2aba"),a=r("7726"),c=r("32e9"),s=r("84f2"),u=r("2b4c"),l=u("iterator"),f=u("toStringTag"),h=s.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),v=0;v<d.length;v++){var m,y=d[v],g=p[y],b=a[y],w=b&&b.prototype;if(w&&(w[l]||c(w,l,h),w[f]||c(w,f,y),s[y]=h,g))for(m in n)w[m]||o(w,m,n[m],!0)}},b05c:function(t,e,r){"use strict";r.d(e,"a",function(){return i}),r.d(e,"b",function(){return o}),r.d(e,"c",function(){return a});var n=r("751a");function i(t){return Object(n["a"])({url:"/api/zntk/v1/staff/qrcode",params:{size:"150",url:t},method:"get"})}function o(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(n["a"])({url:"/api/zntk/v1/clients/verify-code",params:{mobile:t,staff_id:e,check:r},method:"get"})}function a(t){return Object(n["a"])({url:"/api/zntk/v1/clients/".concat(t.commonStaffId),data:t,method:"post"})}},b7c0:function(t,e,r){"use strict";var n=r("2741"),i=r.n(n);i.a},ce3e:function(t,e,r){"use strict";var n=r("eebe"),i=r.n(n);i.a},eebe:function(t,e,r){},f559:function(t,e,r){"use strict";var n=r("5ca1"),i=r("9def"),o=r("d2c8"),a="startsWith",c=""[a];n(n.P+n.F*r("5147")(a),"String",{startsWith:function(t){var e=o(this,t,a),r=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return c?c.call(e,n,r):e.slice(r,r+n.length)===n}})}}]);
//# sourceMappingURL=chunk-60fd.ac2f4e02.js.map