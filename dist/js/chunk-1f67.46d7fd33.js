(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f67"],{"145c":function(t,e,i){"use strict";var n=i("6174"),r=i.n(n);r.a},"1ab5":function(t,e,i){},"36ab":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"form"},[i("div",{staticClass:"item"},[i("span",{staticClass:"title"},[t._v("客户名称：")]),i("wx-input",{ref:"name",attrs:{width:"77%",isRequest:!0,onblur:t.blur,rule:["blur"],ruleFn:t.name_rule},model:{value:t.client_name,callback:function(e){t.client_name=e},expression:"client_name "}})],1),i("div",{staticClass:"item"},[i("span",{staticClass:"title"},[t._v("联系人：")]),i("wx-input",{ref:"linkman",attrs:{width:"77%",isRequest:!0,onblur:t.blur,rule:["blur"],ruleFn:t.contact_rule},model:{value:t.contact_name,callback:function(e){t.contact_name=e},expression:"contact_name"}})],1),i("div",{staticClass:"item"},[i("span",{staticClass:"title"},[t._v("手机号：")]),i("wx-input",{ref:"tel",attrs:{width:"77%",isRequest:!0,onblur:t.blur,rule:["blur"],ruleFn:t.mobile_rule},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1),i("div",{staticClass:"item"},[i("span",{staticClass:"title"},[t._v("验证码：")]),i("wx-input",{ref:"yzm",attrs:{width:"50%",isRequest:!0,onblur:t.blur,rule:["blur"]},model:{value:t.verify_code,callback:function(e){t.verify_code=e},expression:"verify_code"}}),t.count?t._e():i("span",{staticClass:"yzm",on:{click:t.sendYzm}},[t._v("获取验证码")]),t.count?i("span",{staticClass:"yzm date"},[t._v("剩余 "+t._s(t.num)+" 秒")]):t._e()],1)]),i("div",{staticClass:"btn-box"},[i("mt-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")]),i("p",{directives:[{name:"show",rawName:"v-show",value:t.errorShow,expression:"errorShow"}],staticClass:"error"},[t._v("提示："+t._s(t.errorTip))])],1)])},r=[],a=(i("cadf"),i("551c"),i("097d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return"checkbox"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.v,expression:"v"}],ref:"wx-input",staticClass:"wx-input",class:{faild:"faild"===t.valid},style:{width:t.width},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.v)?t._i(t.v,null)>-1:t.v},on:{change:function(e){var i=t.v,n=e.target,r=!!n.checked;if(Array.isArray(i)){var a=null,s=t._i(i,a);n.checked?s<0&&(t.v=i.concat([a])):s>-1&&(t.v=i.slice(0,s).concat(i.slice(s+1)))}else t.v=r}}}):"radio"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.v,expression:"v"}],ref:"wx-input",staticClass:"wx-input",class:{faild:"faild"===t.valid},style:{width:t.width},attrs:{type:"radio"},domProps:{checked:t._q(t.v,null)},on:{change:function(e){t.v=null}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:t.v,expression:"v"}],ref:"wx-input",staticClass:"wx-input",class:{faild:"faild"===t.valid},style:{width:t.width},attrs:{type:t.type},domProps:{value:t.v},on:{input:function(e){e.target.composing||(t.v=e.target.value)}}})}),s=[],u=(i("6762"),i("2fdb"),i("f559"),i("456d"),i("ac6a"),{props:{value:{},width:{type:String,default:"100%"},isRequest:{type:Boolean,default:function(){return!1}},type:{type:String,default:"text"},rule:{type:Array,default:function(){return[]}},ruleFn:{type:Function,default:function(){return!0}},onblur:{type:Function,default:function(){}},onchange:{type:Function,default:function(){}},onkeyup:{type:Function,default:function(){}}},data:function(){return{v:this.value,valid:"success",errorTip:""}},mounted:function(){var t=this,e=this.$refs["wx-input"];Object.keys(this._props).filter(function(t){return t.startsWith("on")}).forEach(function(i){return e.addEventListener(i.slice(2),function(){t.rule.includes(i.slice(2))&&t.validate();var e="faild"===t.valid?t.errorTip:"";!t.v&&t.isRequest&&(e="不能为空"),t[i].call(t,e)},!1)})},methods:{validate:function(){var t=this.ruleFn.call(this,this.v),e=t.result,i=t.tip,n=void 0===i?"错误":i,r="faild"===e?n:"";return!this.v&&this.isRequest&&(r="不能为空",e="faild"),this.errorTip=r,this.valid=e,r}},watch:{v:function(t){this.$emit("input",t)}},beforeDestroy:function(){this.$refs["wx-input"]=null}}),l=u,c=(i("145c"),i("2877")),o=Object(c["a"])(l,a,s,!1,null,"fc7bf93c",null);o.options.__file="WxInput.vue";var f=o.exports,d=i("76a0"),v=i("b05c"),m=i("a417"),h={components:{WxInput:f,"mt-button":d["Button"]},mounted:function(){var t=this;Object(m["a"])().then(function(e){"T"===e.status&&(t.staff_id=e.data.staff.staff_id)})},data:function(){return{client_name:"",contact_name:"",mobile:"",verify_code:"",staff_id:"",errorShow:!1,errorTip:"",timeID:null,num:60,countTime:null,count:!1}},methods:{blur:function(t){t?(this.errorShow=!0,this.errorTip=t):(this.errorShow=!1,this.errorTip="")},sendYzm:function(){var t=this;11===this.mobile.length&&Object(v["b"])(this.mobile,this.staff_id,0).then(function(e){"T"===e.status&&(t.timeID=setInterval(function(){clearInterval(t.countTime),t.checkYzmStatus()},1e3))})},checkYzmStatus:function(){var t=this;Object(v["b"])(this.mobile,this.staff_id,1).then(function(e){"T"===e.status&&(Object(d["Toast"])("验证码发送成功"),clearInterval(t.timeID),t.timeID=null,t.count=!0,t.countTime=setInterval(function(){if(0===t.num)return clearInterval(t.countTime),t.countTime=null,t.num=60,void(t.count=!1);t.num--},1e3))})},name_rule:function(t){return t.length>50?{result:"faild",tip:"客户名称超限：客户名称最多填写50个字哦"}:{result:"success"}},contact_rule:function(t){return t.length>50?{result:"faild",tip:"联系人超限：联系人最多填写50个字哦"}:{result:"success"}},mobile_rule:function(t){return 11!==t.length?{result:"faild",tip:"手机号码没有通过验证：请输入正确的手机号码"}:{result:"success"}},submit:function(){this.validate().then(function(t){})},validate:function(){var t=this,e=["name","linkman","tel","yzm"],i=!0;return new Promise(function(n,r){for(var a="",s=0;s<e.length;s++){var u=e[s],l=t.$refs[u].validate();l&&(i=!1,a||(a=l))}t.errorShow=!i,t.errorTip=a,n(i)})}}},p=h,b=(i("cf28"),Object(c["a"])(p,n,r,!1,null,"82157930",null));b.options.__file="form.vue";e["default"]=b.exports},"456d":function(t,e,i){var n=i("4bf8"),r=i("0d58");i("5eda")("keys",function(){return function(t){return r(n(t))}})},"5eda":function(t,e,i){var n=i("5ca1"),r=i("8378"),a=i("79e5");t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],s={};s[t]=e(i),n(n.S+n.F*a(function(){i(1)}),"Object",s)}},6174:function(t,e,i){},ac6a:function(t,e,i){for(var n=i("cadf"),r=i("0d58"),a=i("2aba"),s=i("7726"),u=i("32e9"),l=i("84f2"),c=i("2b4c"),o=c("iterator"),f=c("toStringTag"),d=l.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=r(v),h=0;h<m.length;h++){var p,b=m[h],_=v[b],y=s[b],w=y&&y.prototype;if(w&&(w[o]||u(w,o,d),w[f]||u(w,f,b),l[b]=d,_))for(p in n)w[p]||a(w,p,n[p],!0)}},b05c:function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"b",function(){return a});var n=i("751a");function r(t){return Object(n["a"])({url:"/api/zntk/v1/staff/qrcode",params:{size:"150"},method:"get"})}function a(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(n["a"])({url:"/api/zntk/v1/clients/verify-code",params:{mobile:t,staff_id:e,check:i},method:"get"})}},cf28:function(t,e,i){"use strict";var n=i("1ab5"),r=i.n(n);r.a},f559:function(t,e,i){"use strict";var n=i("5ca1"),r=i("9def"),a=i("d2c8"),s="startsWith",u=""[s];n(n.P+n.F*i("5147")(s),"String",{startsWith:function(t){var e=a(this,t,s),i=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return u?u.call(e,n,i):e.slice(i,i+n.length)===n}})}}]);
//# sourceMappingURL=chunk-1f67.46d7fd33.js.map