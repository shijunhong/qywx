(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ed1"],{"145c":function(t,e,n){"use strict";var i=n("6174"),r=n.n(i);r.a},"36ab":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"form"},[n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("客户名称：")]),n("wx-input",{ref:"name",attrs:{width:"77%",isRequest:!0,onblur:t.blur,rule:["blur"],ruleFn:t.name_rule},model:{value:t.client_name,callback:function(e){t.client_name=e},expression:"client_name "}})],1),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("联系人：")]),n("wx-input",{ref:"linkman",attrs:{width:"77%",isRequest:!0,onblur:t.blur,rule:["blur"],ruleFn:t.contact_rule},model:{value:t.contact_name,callback:function(e){t.contact_name=e},expression:"contact_name"}})],1),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("手机号：")]),n("wx-input",{ref:"tel",attrs:{width:"77%",isRequest:!0,onblur:t.blur,rule:["blur"],ruleFn:t.mobile_rule},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("验证码：")]),n("wx-input",{ref:"yzm",attrs:{width:"50%",isRequest:!0,onblur:t.blur,rule:["blur"]},model:{value:t.verify_code,callback:function(e){t.verify_code=e},expression:"verify_code"}}),t.count?t._e():n("span",{staticClass:"yzm",on:{click:t.sendYzm}},[t._v("获取验证码")]),t.count?n("span",{staticClass:"yzm date"},[t._v("剩余 "+t._s(t.num)+" 秒")]):t._e()],1)]),n("div",{staticClass:"btn-box"},[n("mt-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.errorShow,expression:"errorShow"}],staticClass:"error"},[t._v("提示："+t._s(t.errorTip))])],1)])},r=[],a=(n("cadf"),n("551c"),n("097d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return"checkbox"===t.type?n("input",{directives:[{name:"model",rawName:"v-model",value:t.v,expression:"v"}],ref:"wx-input",staticClass:"wx-input",class:{faild:"faild"===t.valid},style:{width:t.width},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.v)?t._i(t.v,null)>-1:t.v},on:{change:function(e){var n=t.v,i=e.target,r=!!i.checked;if(Array.isArray(n)){var a=null,s=t._i(n,a);i.checked?s<0&&(t.v=n.concat([a])):s>-1&&(t.v=n.slice(0,s).concat(n.slice(s+1)))}else t.v=r}}}):"radio"===t.type?n("input",{directives:[{name:"model",rawName:"v-model",value:t.v,expression:"v"}],ref:"wx-input",staticClass:"wx-input",class:{faild:"faild"===t.valid},style:{width:t.width},attrs:{type:"radio"},domProps:{checked:t._q(t.v,null)},on:{change:function(e){t.v=null}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:t.v,expression:"v"}],ref:"wx-input",staticClass:"wx-input",class:{faild:"faild"===t.valid},style:{width:t.width},attrs:{type:t.type},domProps:{value:t.v},on:{input:function(e){e.target.composing||(t.v=e.target.value)}}})}),s=[],c=(n("6762"),n("2fdb"),n("f559"),n("456d"),n("ac6a"),{props:{value:{},width:{type:String,default:"100%"},isRequest:{type:Boolean,default:function(){return!1}},type:{type:String,default:"text"},rule:{type:Array,default:function(){return[]}},ruleFn:{type:Function,default:function(){return!0}},onblur:{type:Function,default:function(){}},onchange:{type:Function,default:function(){}},onkeyup:{type:Function,default:function(){}}},data:function(){return{v:this.value,valid:"success",errorTip:""}},mounted:function(){var t=this,e=this.$refs["wx-input"];Object.keys(this._props).filter(function(t){return t.startsWith("on")}).forEach(function(n){return e.addEventListener(n.slice(2),function(){t.rule.includes(n.slice(2))&&t.validate();var e="faild"===t.valid?t.errorTip:"";!t.v&&t.isRequest&&(e="不能为空"),t[n].call(t,e)},!1)})},methods:{validate:function(){var t=this.ruleFn.call(this,this.v),e=t.result,n=t.tip,i=void 0===n?"错误":n,r="faild"===e?i:"";return!this.v&&this.isRequest&&(r="不能为空",e="faild"),this.errorTip=r,this.valid=e,r}},watch:{v:function(t){this.$emit("input",t)}},beforeDestroy:function(){this.$refs["wx-input"]=null}}),o=c,u=(n("145c"),n("2877")),l=Object(u["a"])(o,a,s,!1,null,"fc7bf93c",null);l.options.__file="WxInput.vue";var f=l.exports,d=n("76a0"),m=n("b05c"),v={components:{WxInput:f,"mt-button":d["Button"]},mounted:function(){this.staff_id=this.$route.query.staff_id},data:function(){return{client_name:"",contact_name:"",mobile:"",verify_code:"",staff_id:"",errorShow:!1,errorTip:"",timeID:null,num:60,countTime:null,count:!1}},methods:{blur:function(t){t?(this.errorShow=!0,this.errorTip=t):(this.errorShow=!1,this.errorTip="")},sendYzm:function(){var t=this;11===this.mobile.length&&Object(m["b"])(this.mobile,this.staff_id,0).then(function(e){clearInterval(t.countTime),"T"===e.status&&t.checkYzmStatus()})},checkYzmStatus:function(){var t=this;Object(m["b"])(this.mobile,this.staff_id,1).then(function(e){"T"===e.status?(Object(d["Toast"])("验证码发送成功"),clearInterval(t.timeID),t.timeID=null,t.count=!0,t.countTime=setInterval(function(){if(0===t.num)return clearInterval(t.countTime),t.countTime=null,t.num=60,void(t.count=!1);t.num--},1e3)):t.checkYzmStatus()})},name_rule:function(t){return t.length>50?{result:"faild",tip:"客户名称超限：客户名称最多填写50个字哦"}:{result:"success"}},contact_rule:function(t){return t.length>50?{result:"faild",tip:"联系人超限：联系人最多填写50个字哦"}:{result:"success"}},mobile_rule:function(t){return 11!==t.length?{result:"faild",tip:"手机号码没有通过验证：请输入正确的手机号码"}:{result:"success"}},submit:function(){var t=this;this.validate().then(function(e){e&&Object(m["c"])({commonStaffId:t.staff_id,client_name:t.client_name,contact_name:t.contact_name,mobile:t.mobile,verify_code:t.verify_code}).then(function(e){if("T"===e.status)t.$router.push("/inviteok?client_name=".concat(t.client_name,"&contact_name=").concat(t.contact_name,"&mobile=").concat(t.mobile));else if(e.error){var n=e.error[0]||e.error.code||e.error.mobile[0]||"提交错误";Object(d["Toast"])({message:n,duration:2e3})}})})},validate:function(){var t=this,e=["name","linkman","tel","yzm"],n=!0;return new Promise(function(i,r){for(var a="",s=0;s<e.length;s++){var c=e[s],o=t.$refs[c].validate();o&&(n=!1,a||(a=o))}t.errorShow=!n,t.errorTip=a,i(n)})}}},h=v,p=(n("934a"),Object(u["a"])(h,i,r,!1,null,"d56a4998",null));p.options.__file="form.vue";e["default"]=p.exports},"456d":function(t,e,n){var i=n("4bf8"),r=n("0d58");n("5eda")("keys",function(){return function(t){return r(i(t))}})},"5eda":function(t,e,n){var i=n("5ca1"),r=n("8378"),a=n("79e5");t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),i(i.S+i.F*a(function(){n(1)}),"Object",s)}},6174:function(t,e,n){},"6d77":function(t,e,n){},"934a":function(t,e,n){"use strict";var i=n("6d77"),r=n.n(i);r.a},ac6a:function(t,e,n){for(var i=n("cadf"),r=n("0d58"),a=n("2aba"),s=n("7726"),c=n("32e9"),o=n("84f2"),u=n("2b4c"),l=u("iterator"),f=u("toStringTag"),d=o.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},v=r(m),h=0;h<v.length;h++){var p,b=v[h],_=m[b],y=s[b],w=y&&y.prototype;if(w&&(w[l]||c(w,l,d),w[f]||c(w,f,b),o[b]=d,_))for(p in i)w[p]||a(w,p,i[p],!0)}},b05c:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return s});var i=n("751a");function r(t){return Object(i["a"])({url:"/api/zntk/v1/staff/qrcode",params:{size:"150"},method:"get"})}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(i["a"])({url:"/api/zntk/v1/clients/verify-code",params:{mobile:t,staff_id:e,check:n},method:"get"})}function s(t){return Object(i["a"])({url:"/api/zntk/v1/clients/".concat(t.commonStaffId),data:t,method:"post"})}},f559:function(t,e,n){"use strict";var i=n("5ca1"),r=n("9def"),a=n("d2c8"),s="startsWith",c=""[s];i(i.P+i.F*n("5147")(s),"String",{startsWith:function(t){var e=a(this,t,s),n=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return c?c.call(e,i,n):e.slice(n,n+i.length)===i}})}}]);
//# sourceMappingURL=chunk-3ed1.d6717c3c.js.map